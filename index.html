<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Calculateur de Production</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #111;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      .container {
        background: #1e1e1e;
        padding: 25px;
        border-radius: 12px;
        width: 350px;
      }

      h2 {
        text-align: center;
      }

      input {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        margin-bottom: 15px;
        border-radius: 6px;
        border: none;
      }

      button {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 6px;
        background: #00c853;
        color: black;
        font-weight: bold;
        cursor: pointer;
      }

      .resultat {
        margin-top: 20px;
        line-height: 1.6;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h2>Production Mensuelle</h2>

      <label>Nombre de jours ouvrés</label>
      <input type="number" id="jours" />

      <label>Rebus dans le mois</label>
      <input type="number" id="erreurs" />

      <button onclick="calculer()">Calculer</button>

      <div class="resultat" id="resultat"></div>
    </div>

    <script>
      const PRODUCTION_JOUR = 54

      // Charger données sauvegardées
      window.onload = () => {
        const jours = localStorage.getItem('jours')
        const erreurs = localStorage.getItem('erreurs')
        const resultat = localStorage.getItem('resultat')

        if (jours) document.getElementById('jours').value = jours
        if (erreurs) document.getElementById('erreurs').value = erreurs
        if (resultat) document.getElementById('resultat').innerHTML = resultat
      }

      function calculer() {
        const jours = Number(document.getElementById('jours').value)
        const erreurs = Number(document.getElementById('erreurs').value)

        if (!jours) {
          alert('Veuillez entrer le nombre de jours ouvrés.')
          return
        }

        const totalFabrique = jours * PRODUCTION_JOUR
        const moulesBons = totalFabrique - erreurs
        const pourcentage = ((moulesBons / totalFabrique) * 100).toFixed(2)

        const html = `
        <strong>Total fabriqué :</strong> ${totalFabrique}<br>
        <strong>Moules conformes :</strong> ${moulesBons}<br>
        <strong>Rendement :</strong> ${pourcentage} %
    `

        document.getElementById('resultat').innerHTML = html

        // Sauvegarde locale
        localStorage.setItem('jours', jours)
        localStorage.setItem('erreurs', erreurs)
        localStorage.setItem('resultat', html)
      }
    </script>
  </body>
</html>
